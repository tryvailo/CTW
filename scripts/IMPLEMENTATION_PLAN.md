# üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è TreatmentConnect –∏ –ø—Ä—è–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ü–µ–Ω

**–î–∞—Ç–∞:** 2025-11-07  
**–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞:** executive-summary.md, improved-price-sources-solution.md, quick-start-url-list.md, technical-implementation-guide.md  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üìä –û–±–∑–æ—Ä —Ä–µ—à–µ–Ω–∏—è

### –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:

1. **TIER 1: TreatmentConnect.co.uk** (–û–°–ù–û–í–ù–û–ô) üèÜ
   - –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä 146 —á–∞—Å—Ç–Ω—ã—Ö –±–æ–ª—å–Ω–∏—Ü
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ HTML
   - –ü–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä –∏ –≥–æ—Ä–æ–¥–æ–≤
   - ~180 price points –∏–∑ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

2. **TIER 2: –ü—Ä—è–º—ã–µ —Å–∞–π—Ç—ã –∫–ª–∏–Ω–∏–∫** (–í–ê–õ–ò–î–ê–¶–ò–Ø) ‚úì
   - Spire Healthcare (38 hospitals)
   - Nuffield Health (31 hospitals)
   - Circle Health Group (52 hospitals)
   - Ramsay Health Care (35 hospitals)

3. **TIER 3: NHS PHIN Articles** (–ö–û–ù–¢–ï–ö–°–¢) üìä
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ averages

---

## üéØ –¶–µ–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (–ù–µ–¥–µ–ª—è 1):
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å TreatmentConnect –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å 60+ –≥–æ—Ç–æ–≤—ã—Ö URL –∏–∑ quick-start-url-list.md
- ‚úÖ –°–æ–±—Ä–∞—Ç—å 150-200 price points
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é –∞–≥—Ä–µ–≥–∞—Ü–∏—é –ø–æ –≥–æ—Ä–æ–¥–∞–º

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (–ù–µ–¥–µ–ª—è 2):
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä—è–º—ã–µ —Å–∞–π—Ç—ã –∫–ª–∏–Ω–∏–∫ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ Cross-validate —Ü–µ–Ω—ã –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- ‚úÖ –£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ 300+ price points

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (–ù–µ–¥–µ–ª—è 3-4):
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π pipeline
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (weekly/monthly)
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω

---

## üìã –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–î–µ–Ω—å 1)

### 1.1 –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–§–∞–π–ª:** `scripts/config.js`

**–î–æ–±–∞–≤–∏—Ç—å:**
```javascript
urls: {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ URL
  treatmentconnect_base: 'https://www.treatmentconnect.co.uk',
  treatmentconnect_pattern: 'https://www.treatmentconnect.co.uk/hospitals/{hospital}/{procedure}',
  
  // –ü—Ä—è–º—ã–µ —Å–∞–π—Ç—ã –∫–ª–∏–Ω–∏–∫
  spire_base: 'https://www.spirehealthcare.com',
  nuffield_base: 'https://www.nuffieldhealth.com',
  circle_base: 'https://www.circlehealthgroup.co.uk',
  ramsay_base: 'https://www.ramsayhealth.co.uk'
},

// –ú–∞–ø–ø–∏–Ω–≥ –ø—Ä–æ—Ü–µ–¥—É—Ä –¥–ª—è TreatmentConnect
treatmentconnect_procedures: {
  cataract: 'cataract-surgery',
  hip: 'hip-replacement',
  knee: 'knee-replacement'
}
```

### 1.2 –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ URL –∏–∑ quick-start-url-list.md

**–§–∞–π–ª:** `scripts/treatmentconnect-urls.js`

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ –∏–∑ 60+ URL
- –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø–æ –≥–æ—Ä–æ–¥–∞–º –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º
- –í–∫–ª—é—á–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (city, procedure, hospital)

### 1.3 –û–±–Ω–æ–≤–∏—Ç—å JSON —Å—Ö–µ–º—ã

**–§–∞–π–ª:** `scripts/schemas/private-costs-schema.js`

**–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É TreatmentConnect:**
- –†–∞—Å—à–∏—Ä–∏—Ç—å —Å—Ö–µ–º—É –¥–ª—è rating_stars, avg_uk_price
- –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è TreatmentConnect —Ñ–æ—Ä–º–∞—Ç–∞
- –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

---

## üìã –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è TreatmentConnect (–î–µ–Ω—å 2-3)

### 2.1 –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è TreatmentConnect

**–§–∞–π–ª:** `scripts/scraper.js`

**–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
```javascript
/**
 * Extract prices from TreatmentConnect.co.uk
 * PRIMARY SOURCE for private costs
 */
export async function extractTreatmentConnectPrices(url, procedure, city) {
  try {
    const schema = schemas.privateCosts.schema; // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞
    const prompt = schemas.privateCosts.getTreatmentConnectPrompt(procedure, city);
    
    const jsonData = await scrapeWithJSONMode(url, schema, prompt);
    
    if (!jsonData || !jsonData.price_gbp) {
      return null;
    }
    
    // Transform to CSV format
    return {
      procedure_id: procedure,
      city: city,
      cost_min: jsonData.price_min_gbp || jsonData.price_gbp,
      cost_max: jsonData.price_max_gbp || jsonData.price_gbp,
      clinic_count: 1, // One hospital per URL
      date: new Date().toISOString().split('T')[0],
      source: 'TreatmentConnect',
      hospital_name: jsonData.hospital_name,
      rating: jsonData.rating_stars,
      avg_uk_price: jsonData.avg_uk_price
    };
  } catch (error) {
    console.error(`  ‚ùå TreatmentConnect extraction failed: ${error.message}`);
    return null;
  }
}
```

### 2.2 –û–±–Ω–æ–≤–∏—Ç—å scrapePHINData()

**–§–∞–π–ª:** `scripts/scraper.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ `scrapePrivateCosts()` (–±–æ–ª–µ–µ –æ–±—â–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: TreatmentConnect ‚Üí Direct clinics ‚Üí Fallback
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É TreatmentConnect URL

### 2.3 –°–æ–∑–¥–∞—Ç—å batch processor

**–§–∞–π–ª:** `scripts/batch-processor.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Å—Å–∏–≤–∞ URL –±–∞—Ç—á–∞–º–∏
- Rate limiting (6 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏)
- Retry –ª–æ–≥–∏–∫–∞
- –ü—Ä–æ–≥—Ä–µ—Å—Å-—Ç—Ä–µ–∫–∏–Ω–≥
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

## üìã –≠—Ç–∞–ø 3: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–î–µ–Ω—å 4)

### 3.1 –°–æ–∑–¥–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä

**–§–∞–π–ª:** `scripts/aggregator.js`

**–§—É–Ω–∫—Ü–∏–∏:**
```javascript
/**
 * Aggregate prices by city and procedure
 */
export function aggregatePricesByCity(results) {
  // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ city ‚Üí procedure
  // –†–∞—Å—á–µ—Ç: min, max, average, median
  // –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–∏–Ω–∏–∫
}

/**
 * Generate city-level statistics
 */
export function generateCityStats(aggregated) {
  // –§–æ—Ä–º–∞—Ç –¥–ª—è CSV
  // –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ private_costs.csv
}
```

### 3.2 –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–§–∞–π–ª:** `scripts/scraper.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö ‚Üí –∞–≥—Ä–µ–≥–∞—Ü–∏—è
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ city + procedure
- –†–∞—Å—á–µ—Ç min/max/average
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `private_costs.csv`

---

## üìã –≠—Ç–∞–ø 4: –í–∞–ª–∏–¥–∞—Ü–∏—è —Å –ø—Ä—è–º—ã–º–∏ —Å–∞–π—Ç–∞–º–∏ (–ù–µ–¥–µ–ª—è 2)

### 4.1 –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Spire Healthcare

**–§–∞–π–ª:** `scripts/scraper.js`

**–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
```javascript
async function extractSpirePrices(url, procedure, city) {
  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å spirePrompt –∏–∑ technical-implementation-guide.md
  // –ò–∑–≤–ª–µ—á—å —Ü–µ–Ω—ã —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü Spire
  // –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤ TreatmentConnect
}
```

### 4.2 –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥—Ä—É–≥–∏—Ö —Å–µ—Ç–µ–π

- Nuffield Health
- Circle Health Group
- Ramsay Health Care

### 4.3 Cross-validation

**–§–∞–π–ª:** `scripts/validator.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- –§–ª–∞–≥ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π (>10% —Ä–∞–∑–Ω–∏—Ü–∞)
- –†–∞—Å—á–µ—Ç match rate
- Quality scoring

---

## üìã –≠—Ç–∞–ø 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–î–µ–Ω—å 5)

### 5.1 Unit —Ç–µ—Å—Ç—ã

**–§–∞–π–ª:** `scripts/test-treatmentconnect.js`

**–¢–µ—Å—Ç—ã:**
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ TreatmentConnect URL
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### 5.2 Integration —Ç–µ—Å—Ç—ã

**–§–∞–π–ª:** `scripts/test-integration.js`

**–¢–µ—Å—Ç—ã:**
- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: URL ‚Üí Extraction ‚Üí Aggregation ‚Üí CSV
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

### 5.3 Manual validation

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å 10 —Å–ª—É—á–∞–π–Ω—ã—Ö URL –≤—Ä—É—á–Ω—É—é
- –°—Ä–∞–≤–Ω–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ü–µ–Ω—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è

---

## üìã –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

### 6.1 –û–±–Ω–æ–≤–∏—Ç—å main() —Ñ—É–Ω–∫—Ü–∏—é

**–§–∞–π–ª:** `scripts/scraper.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```javascript
async function main() {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
  
  // –ù–û–í–û–ï: –û–±—Ä–∞–±–æ—Ç–∫–∞ TreatmentConnect URL
  const treatmentConnectUrls = await loadTreatmentConnectUrls();
  
  for (const urlData of treatmentConnectUrls) {
    const { url, procedure, city } = urlData;
    
    // –ò–∑–≤–ª–µ—á—å —Ü–µ–Ω—ã
    const priceData = await extractTreatmentConnectPrices(url, procedure, city);
    
    if (priceData) {
      privateCostsData.push(priceData);
    }
    
    // Rate limiting
    await sleep(6000);
  }
  
  // –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
  const aggregated = aggregatePricesByCity(privateCostsData);
  
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
  // ...
}
```

### 6.2 –û–±–Ω–æ–≤–∏—Ç—å fallback –ª–æ–≥–∏–∫—É

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. TreatmentConnect (–Ω–æ–≤—ã–π –æ—Å–Ω–æ–≤–Ω–æ–π)
2. –ü—Ä—è–º—ã–µ —Å–∞–π—Ç—ã –∫–ª–∏–Ω–∏–∫ (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
3. –°—Ç–∞—Ä—ã–µ –ø–∞—Ä—Å–µ—Ä—ã (fallback)
4. CSV fallback (–ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑–µ—Ä–≤)

---

## üìã –≠—Ç–∞–ø 7: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 7.1 –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–§–∞–π–ª—ã:**
- `scripts/SCRAPER_SETUP_COMPLETE.md` - –¥–æ–±–∞–≤–∏—Ç—å TreatmentConnect
- `scripts/MIGRATION_COMPLETE.md` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
- –°–æ–∑–¥–∞—Ç—å `scripts/TREATMENTCONNECT_GUIDE.md`

### 7.2 –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª:** `scripts/scraper.js`

**–î–æ–±–∞–≤–∏—Ç—å:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –∏–∑–≤–ª–µ—á–µ–Ω–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö

### 7.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–°–æ–∑–¥–∞—Ç—å:**
- `scripts/monitor.js` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
- –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –∞–Ω–æ–º–∞–ª–∏—è—Ö –≤ —Ü–µ–Ω–∞—Ö
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å–∞–π—Ç–æ–≤

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### JSON Schema –¥–ª—è TreatmentConnect

**–§–∞–π–ª:** `scripts/schemas/treatmentconnect-schema.js` (–Ω–æ–≤—ã–π)

```javascript
export const treatmentConnectSchema = {
  type: "object",
  properties: {
    hospital_name: { type: "string" },
    procedure_name: { type: "string" },
    price_gbp: { type: "number" },
    price_min_gbp: { type: "number" },
    price_max_gbp: { type: "number" },
    city: { type: "string" },
    rating_stars: { type: "number" },
    rating_count: { type: "integer" },
    avg_uk_price: { type: "number" }
  },
  required: ["hospital_name", "procedure_name", "price_gbp", "city"]
};
```

### –ü—Ä–æ–º–ø—Ç –¥–ª—è TreatmentConnect

**–§–∞–π–ª:** `scripts/schemas/private-costs-schema.js`

**–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é:**
```javascript
export const getTreatmentConnectPrompt = (procedure, city) => {
  return `Extract pricing information from TreatmentConnect.co.uk hospital pages.

CRITICAL RULES:
1. Extract ONLY numeric values for all prices (no currency symbols, no commas)
2. Convert "¬£2,500" to 2500
3. If price shows "From ¬£X", return X as price_min_gbp
4. Extract hospital name from H1 heading (format: "Hospital Name | Procedure ¬£X")
5. City is usually shown in the address section
6. Rating is shown as "X out of 5 stars" - extract the X value
7. Look for "Average UK price: ¬£X" for avg_uk_price

EXAMPLE:
H1: "Spire London East Hospital | Cataract Surgery ¬£2,000"
Extract: hospital_name="Spire London East Hospital", price_gbp=2000

RETURN:
- Only the JSON object matching the schema
- No explanatory text`;
};
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ—Å–ª–µ –ù–µ–¥–µ–ª–∏ 1:
- ‚úÖ 150-200 price points —Å–æ–±—Ä–∞–Ω–æ
- ‚úÖ 5 –≥–æ—Ä–æ–¥–æ–≤ –ø–æ–∫—Ä—ã—Ç–æ
- ‚úÖ 3 –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –ø–æ–∫—Ä—ã—Ç—ã
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ CSV —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã

### –ü–æ—Å–ª–µ –ù–µ–¥–µ–ª–∏ 2:
- ‚úÖ 300-400 price points —Å–æ–±—Ä–∞–Ω–æ
- ‚úÖ Cross-validation —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Quality metrics –≤–Ω–µ–¥—Ä–µ–Ω—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

### –ü–æ—Å–ª–µ –ù–µ–¥–µ–ª–∏ 3-4:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π pipeline
- ‚úÖ 600+ price points –≤ –±–∞–∑–µ
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –î–µ–Ω—å 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `config.js` —Å TreatmentConnect URL
- [ ] –°–æ–∑–¥–∞—Ç—å `treatmentconnect-urls.js` —Å 60+ URL
- [ ] –û–±–Ω–æ–≤–∏—Ç—å JSON —Å—Ö–µ–º—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 3-5 URL

### –î–µ–Ω—å 2-3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å `extractTreatmentConnectPrices()`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `scrapePHINData()` ‚Üí `scrapePrivateCosts()`
- [ ] –°–æ–∑–¥–∞—Ç—å batch processor
- [ ] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ 60+ URL

### –î–µ–Ω—å 4: –ê–≥—Ä–µ–≥–∞—Ü–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å `aggregator.js`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é –ø–æ –≥–æ—Ä–æ–¥–∞–º
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è CSV
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é

### –î–µ–Ω—å 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è TreatmentConnect
- [ ] Integration —Ç–µ—Å—Ç—ã
- [ ] Manual validation (10 URL)
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ù–µ–¥–µ–ª—è 2: –í–∞–ª–∏–¥–∞—Ü–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Spire
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Nuffield
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Circle
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å cross-validation
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –ù–µ–¥–µ–ª—è 3-4: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å scheduled runs
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üö® –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã TreatmentConnect
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- Fallback –Ω–∞ –ø—Ä—è–º—ã–µ —Å–∞–π—Ç—ã –∫–ª–∏–Ω–∏–∫
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–∏—Å–∫ 2: Rate limiting
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ 6-—Å–µ–∫—É–Ω–¥–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏
- Batch processing
- Retry —Å exponential backoff

### –†–∏—Å–∫ 3: –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (weekly/monthly)
- Timestamp tracking
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤ –ø—Ä—è–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (—Å–µ–≥–æ–¥–Ω—è):
1. ‚úÖ –ò–∑—É—á–∏—Ç—å –≤—Å–µ 4 –¥–æ–∫—É–º–µ–Ω—Ç–∞
2. ‚è≠Ô∏è –û–±–Ω–æ–≤–∏—Ç—å `config.js`
3. ‚è≠Ô∏è –°–æ–∑–¥–∞—Ç—å `treatmentconnect-urls.js`
4. ‚è≠Ô∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 5 URL

### –≠—Ç–∞ –Ω–µ–¥–µ–ª—è:
1. ‚è≠Ô∏è –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å TreatmentConnect
2. ‚è≠Ô∏è –û–±—Ä–∞–±–æ—Ç–∞—Ç—å 60+ URL
3. ‚è≠Ô∏è –°–æ–∑–¥–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é
4. ‚è≠Ô∏è –û–±–Ω–æ–≤–∏—Ç—å CSV —Ñ–∞–π–ª—ã

### –°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è:
1. ‚è≠Ô∏è –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
2. ‚è≠Ô∏è Cross-validate —Ü–µ–Ω—ã
3. ‚è≠Ô∏è –£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ
4. ‚è≠Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–ª–∞–Ω –≥–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –í—ã—Å–æ–∫–∏–π  
**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 2-4 –Ω–µ–¥–µ–ª–∏ –¥–æ production

